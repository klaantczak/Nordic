var fs = require('fs');
var options = { encoding: 'utf8' };
var original = fs.readFileSync('../../models/n32.networks/Substations.json', options);
var model = JSON.parse(original);
var flow = {};
flow['4071-4011'] = 611.1821026699057;
flow['4071-4012'] = 544.9285128519632;
flow['4071-4072-1'] = -535.236396074933;
flow['4071-4072-2'] = -535.236396074933;
flow['4011-1011'] = -274.70799369134147;
flow['4011-4021'] = 918.7387873625412;
flow['4011-4022'] = 726.6083749483557;
flow['4011-4012'] = -331.2679490897126;
flow['1011-1013-1'] = -237.35399684566573;
flow['1011-1013-2'] = -237.35399684566573;
flow['1013-1014-1'] = -130.30671763068358;
flow['1013-1014-2'] = -130.30671763068358;
flow['4012-1012'] = -253.21350497057028;
flow['4012-4022'] = 809.4253622207839;
flow['1012-1014-1'] = -19.55947327030094;
flow['1012-1014-2'] = -19.55947327030094;
flow['4021-4042'] = 604.1723667194416;
flow['4021-4032'] = 443.02315570108476;
flow['1021-1022-1'] = 128.45673505798413;
flow['1021-1022-2'] = 128.45673505798413;
flow['1022-4022'] = 226.91347011596736;
flow['4022-4031-1'] = 881.4736036425518;
flow['4022-4031-2'] = 881.4736036425518;
flow['2032-2031-1'] = 139.16146297948262;
flow['2032-2031-2'] = 139.16146297948262;
flow['2031-4031'] = 178.32292595896433;
flow['4031-4041-1'] = 619.4694457645521;
flow['4031-4041-2'] = 619.4694457645521;
flow['4031-4032'] = 852.1974326159561;
flow['4032-4042'] = 426.9631044390078;
flow['4032-4044'] = 868.2574838780295;
flow['4042-4044'] = 469.9569294390494;
flow['4042-4043'] = 689.6352767773842;
flow['4041-4044'] = 781.6418870989401;
flow['4041-4061'] = 217.29700443016463;
flow['4044-1044-1'] = 625.4422378201998;
flow['4044-1044-2'] = 625.4422378201998;
flow['4044-4045-1'] = 214.80756504946748;
flow['4044-4045-2'] = 214.80756504946748;
flow['4044-4043'] = 439.3566946766696;
flow['4043-4047'] = -60.50401427296947;
flow['4043-4046'] = 289.49598572702234;
flow['4046-4047'] = -410.5040142729613;
flow['4061-4062'] = -282.70299556980535;
flow['1043-1041-1'] = 205.37060519034458;
flow['1043-1041-2'] = 205.37060519034458;
flow['1043-1044-1'] = -220.37060519033366;
flow['1043-1044-2'] = -220.37060519033366;
flow['1044-1042-1'] = 5.07163262985523;
flow['1044-1042-2'] = 5.07163262985523;
flow['1042-1045'] = 52.96217694570805;
flow['1041-1045-1'] = -94.62939480966088;
flow['1041-1045-2'] = -94.62939480966088;
flow['1045-4045-1'] = -418.1483063368105;
flow['1045-4045-2'] = -418.1483063368105;
flow['4062-4063-1'] = -130.5976806422832;
flow['4062-4063-2'] = -130.5976806422832;
flow['4062-4045'] = 149.76801245871775;
flow['4045-4051-1'] = -128.45673505798413;
flow['4045-4051-2'] = -128.45673505798413;

model.machines
    .filter(m => m.machine === 'Link')
    .filter(m => flow[m.name] !== undefined)
    .forEach(m => m.properties.max = Math.abs(flow[m.name]) * 2);

var updated = JSON.stringify(model, null, '  ');
fs.writeFileSync('../../models/n32.networks/Substations.json', updated, options);
